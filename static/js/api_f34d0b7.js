"use strict";var MY_SITE="my_site";$(function(){var t={};window.Api=window.Api||{},window.Api.Maxthon=function(){function t(t,e,n){try{window.maxthon.webSend(t,e,function(t){n&&t.status&&t.status===!0?n(t.result):n&&n({})})}catch(i){console.error("[maxthon]未定义, 请使用傲游浏览器")}}function e(t,e,n){var i=this;i.getSyncValue(t,function(t){i.getSyncValue(e,function(e){i.getSyncValue("mx4_image_mapping",function(i){try{if($.isEmptyObject(t))n({});else{for(var o=t.page||[],a=0;a<o.length;a++)for(var r=0;r<t.page[a].content.length;r++){var c=t.page[a].content[r];for(var l in i)if(l===c.url){c.thumbType="default"===i[l]?0:"snap"===i[l]?1:2;break}if(!$.isEmptyObject(e))for(var s in e)if(s==c.templateDataId){t.page[a].content=t.page[a].content.concat(e[s]);break}}n(t)}}catch(u){n({})}})})})}function n(e,n){"object"==typeof n&&(n=JSON.stringify(n)),t("quickaccess.setSyncValue",{key:e,json:n},function(t){t&&!t.status})}function i(e,n){t("quickaccess.getSyncValue",{key:e},function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}n(t)})}function o(e){try{t("account.getBrowserCurrentAccountInfo",{},function(t){e&&e({uid:t.id})})}catch(n){console.error("[maxthon]未定义, 请使用傲游浏览器")}}function a(t,e){o(function(n){t.uid=n.uid,t.lang=navigator.language,t.pn=external.GetPN&&external.GetPN(),t.platform=navigator.userAgent.match("Macintosh;.*Mac.*")?"Mac":"Win",$.ajax({type:"post",async:!0,url:"/api/data/convert.php",data:t,success:function(t){t.status&&t.result&&t.result.length>0?t.result[t.result.length-1].title&&t.result[0].title&&e&&e(t.result):e&&e(DEFAULT_MY_SITE)},error:function(){e&&e(JSON.parse(t.mx5_layout))}})})}var r,c=function(){try{return external&&external.max_version?external.max_version:"function"==typeof external.maxVersion?external.maxVersion():"5.0.0.0"}catch(t){return 0}}();return o(function(t){r=t.uid}),{pn:"function"==typeof external.GetPN?external.GetPN():"",platform:navigator.userAgent.match("Macintosh;.*Mac.*")?"Mac":"Win",max_version:c,uid:r,getLayout:e,useApi:t,getSyncValue:i,setSyncValue:n,mx4_2_mx5:a}}();var e=window.Api.Maxthon;window.Api.Tools=function(){function t(t){e.useApi("getLocale",{},function(e){t&&t(e)})}function n(t,n){e.useApi("quickaccess.reflushThumb",{url:t,reflush:1},function(){n&&n()})}function i(t,n){e.useApi("quickaccess.isThumbExists",{urls:t},function(t){n&&n(t)})}function o(){return!navigator.userAgent.match(/Intel Mac OS X/)}function a(t){var e=Language.getLang(1===t?"NoteBeenCompleteDeleted":"NoteBeenDeleted"),n=$("#note_is_delete").dialog({html:'<div class="dialog-warp">                            <div class="dialog-header">                            <a class="close" href="#close">×</a>                            </div>                            <div class="dialog-content" style="padding: 0;height: 160px;">                                <div class="ui-icon" style="position:static;margin-top:22px;">                                    <svg viewBox="0 0 44 44" version="1.1" width="44" height="72" style="display: block;margin: 0 auto;">                                        <defs>                                            <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-1">                                                <stop stop-color="#FFD23A" offset="0%"></stop>                                                <stop stop-color="#FF901B" offset="100%"></stop>                                            </linearGradient>                                        </defs>                                        <g id="定稿方案" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                                            <g id="文件夹_删除弹框" transform="translate(-791.000000, -536.000000)">                                                <g id="Group-36" transform="translate(719.000000, 467.000000)">                                                    <g id="Group-55" transform="translate(72.000000, 68.000000)">                                                        <g id="Group-51" transform="translate(0.000000, 1.000000)">                                                            <g id="Group-50">                                                                <circle id="Oval-6" fill="url(#linearGradient-1)" cx="22" cy="22" r="22"></circle>                                                                <path d="M20.5243773,23.3630273 L20.0951053,16.9373613 C20.0146164,15.6853116 19.9743725,14.7865322 19.9743725,14.2409963 C19.9743725,13.4987096 20.1688845,12.9196453 20.5579142,12.5037859 C20.946944,12.0879266 21.4589352,11.88 22.0939033,11.88 C22.8630195,11.88 23.3772465,12.1460566 23.6365997,12.6781777 C23.8959528,13.2102989 24.0256275,13.9771678 24.0256275,14.9788076 C24.0256275,15.5690596 23.9943267,16.1682459 23.9317242,16.7763843 L23.3548899,23.3898568 C23.2922874,24.1768595 23.1581412,24.7805173 22.9524474,25.2008482 C22.7467535,25.6211792 22.4069165,25.8313416 21.9329262,25.8313416 C21.4499928,25.8313416 21.1146273,25.6278865 20.9268199,25.2209704 C20.7390124,24.8140542 20.6048662,24.194746 20.5243773,23.3630273 L20.5243773,23.3630273 Z M22.0134148,32.1899338 C21.4678788,32.1899338 20.9916599,32.013308 20.5847437,31.6600511 C20.1778276,31.3067942 19.9743725,30.8126891 19.9743725,30.177721 C19.9743725,29.6232419 20.1688845,29.1514945 20.5579142,28.7624648 C20.946944,28.373435 21.4231629,28.1789231 21.9865852,28.1789231 C22.5500076,28.1789231 23.0306981,28.373435 23.428671,28.7624648 C23.826644,29.1514945 24.0256275,29.6232419 24.0256275,30.177721 C24.0256275,30.8037459 23.8244082,31.2956152 23.4219637,31.6533437 C23.0195191,32.0110722 22.5500075,32.1899338 22.0134148,32.1899338 L22.0134148,32.1899338 Z" id="!" fill="#FFFFFF"></path>                                                            </g>                                                        </g>                                                    </g>                                                </g>                                            </g>                                        </g>                                    </svg>                                </div>                                <div class="msg" style="text-align:center;margin:0 auto;overflow:hidden;width:280px;color:#333;">'+e+"</div>                            </div>                        </div>",autoClose:!1,after:function(t){t.one("click",".close",function(){n.close()})}})}function r(t){var e=$("#delete_folder").dialog({html:'<div class="dialog-warp">                            <div class="dialog-header">                                <a class="close" href="javascript:void(0);">×</a>                                <h1>'+Language.getLang("DeleteFolderTitle")+'</h1>                            </div>                            <div class="dialog-content">                                <div class="ui-icon">                                    <svg viewBox="0 0 44 44" version="1.1" width="44" height="72">                                        <defs>                                            <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-1">                                                <stop stop-color="#FFD23A" offset="0%"></stop>                                                <stop stop-color="#FF901B" offset="100%"></stop>                                            </linearGradient>                                        </defs>                                        <g id="定稿方案" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                                            <g id="文件夹_删除弹框" transform="translate(-791.000000, -536.000000)">                                                <g id="Group-36" transform="translate(719.000000, 467.000000)">                                                    <g id="Group-55" transform="translate(72.000000, 68.000000)">                                                        <g id="Group-51" transform="translate(0.000000, 1.000000)">                                                            <g id="Group-50">                                                                <circle id="Oval-6" fill="url(#linearGradient-1)" cx="22" cy="22" r="22"></circle>                                                                <path d="M20.5243773,23.3630273 L20.0951053,16.9373613 C20.0146164,15.6853116 19.9743725,14.7865322 19.9743725,14.2409963 C19.9743725,13.4987096 20.1688845,12.9196453 20.5579142,12.5037859 C20.946944,12.0879266 21.4589352,11.88 22.0939033,11.88 C22.8630195,11.88 23.3772465,12.1460566 23.6365997,12.6781777 C23.8959528,13.2102989 24.0256275,13.9771678 24.0256275,14.9788076 C24.0256275,15.5690596 23.9943267,16.1682459 23.9317242,16.7763843 L23.3548899,23.3898568 C23.2922874,24.1768595 23.1581412,24.7805173 22.9524474,25.2008482 C22.7467535,25.6211792 22.4069165,25.8313416 21.9329262,25.8313416 C21.4499928,25.8313416 21.1146273,25.6278865 20.9268199,25.2209704 C20.7390124,24.8140542 20.6048662,24.194746 20.5243773,23.3630273 L20.5243773,23.3630273 Z M22.0134148,32.1899338 C21.4678788,32.1899338 20.9916599,32.013308 20.5847437,31.6600511 C20.1778276,31.3067942 19.9743725,30.8126891 19.9743725,30.177721 C19.9743725,29.6232419 20.1688845,29.1514945 20.5579142,28.7624648 C20.946944,28.373435 21.4231629,28.1789231 21.9865852,28.1789231 C22.5500076,28.1789231 23.0306981,28.373435 23.428671,28.7624648 C23.826644,29.1514945 24.0256275,29.6232419 24.0256275,30.177721 C24.0256275,30.8037459 23.8244082,31.2956152 23.4219637,31.6533437 C23.0195191,32.0110722 22.5500075,32.1899338 22.0134148,32.1899338 L22.0134148,32.1899338 Z" id="!" fill="#FFFFFF"></path>                                                            </g>                                                        </g>                                                    </g>                                                </g>                                            </g>                                        </g>                                    </svg>                                </div>                                <div class="msg">                                    <h3>'+Language.getLang("DeleteFolderWarn")+"</h3>                                    <p>"+Language.getLang("DeleteFolderContent").replace("{name}",t.title).replace("{count}",t.children.length)+'</p>                                </div>                            </div>                            <div class="dialog-footer">                                <button id="ok_btn" class="button primary">'+Language.getLang("Confirm")+'</button>                                <button id="cancel_btn" class="button">'+Language.getLang("Cancel")+"</button>                            </div>                        </div>",autoClose:!1,after:function(n){n.find(".close").off("click").on("click",function(){return e.close(),!1}),n.find(".button").off("click").on("click",function(){var n=$(this);switch(n.index()){case 0:e.close(),Controller.onRemoveGrid(t.index),datacode.removeGrid(t);break;case 1:e.close()}})}})}function c(t,e,n){var i=null,o=null;return function(){var a=+new Date;o||(o=a),a-o>n?(t(),o=a):(clearTimeout(i),i=setTimeout(function(){t()},e))}}return{throttle:c,getLocale:t,reflushThumb:n,isThumbExists:i,isSupportWebp:o,showNoteNotFound:a,showDeleteFolder:r}}(),window.Api.Grid=function(){function n(t){e.getSyncValue(MY_SITE,function(n){$.isEmptyObject(n)&&(n=DEFAULT_MY_SITE),t&&t(n),e.setSyncValue(MY_SITE,n)})}function i(n){n&&(t=n),e.getSyncValue(MY_SITE,function(n){"Object"===Object.prototype.toString.call(n).slice(8,-1)&&0===Object.keys(n).length&&(n=DEFAULT_MY_SITE),e.getSyncValue("needImport",function(i){return i.needImport&&1==i.needImport?void e.getLayout("qa_layout_guest","qa_widget_guest",function(i){e.mx4_2_mx5({mx4_layout_guest:JSON.stringify(i),mx5_layout:JSON.stringify(n),"import":"mx4"},function(n){e.setSyncValue("needImport",{needImport:!1}),Controller.onGetGridList(n,t)})}):i.needImport5&&1==i.needImport5?void e.getSyncValue("my_site_guest",function(i){e.mx4_2_mx5({mx5_layout_guest:JSON.stringify(i),mx5_layout:JSON.stringify(n),"import":"mx5"},function(n){e.setSyncValue("needImport",{needImport5:!1}),Controller.onGetGridList(n,t)})}):void 0}),Controller.onGetGridList(n,t),configPanel.init(),newWin.init(t)})}function o(t,e,i){n(function(n){0>e?n.splice(t,0,i):n[e].children.splice(n[e].children.length,0,n.splice(t,1)[0])})}function a(t,e){n(function(n){e.j<0&&t.j<0?n.splice(e.i,0,n.splice(t.i,1)[0]):e.j<0&&t.j>=0?(n.splice(e.i,0,n[t.i].children.splice(t.j,1)[0]),0===n[t.i].children.length&&n.splice(t.i,1)):n[t.i].children.splice(e.j,0,n[t.i].children.splice(t.j,1)[0])})}function r(t,e){n(function(n){0>e?n.splice(t,1):(n[t].children.splice(e,1),0===n[t].children.length&&n.splice(t,1))})}function c(t,e,i){n(function(n){0>e?n[t]=i:n[t].children[e]=i})}function l(t,e,i,o){n(function(n){n.splice(t,1,e),n.splice(i,1,o)})}function s(t,e,i,o){n(function(n){var a={title:o,children:[]},r=a.children;e>i?(r[1]=n.splice(e,1)[0],r[0]=n.splice(i,1)[0]):(r[0]=n.splice(i,1)[0],r[1]=n.splice(e,1)[0]),n.splice(t,0,a)})}function u(t,e){n(function(n){n[t].title=e})}return{addGridGroup:s,updateGridGroup:u,moveGridItem:a,swapGridItem:l,insertGridItem:o,getGridDataList:i,updateGridItem:c,removeGridItem:r}}(),window.Api.statistic=function(){function t(t){var e=Math.random().toString().substr(2,5),n="http://g.dcs.maxthon.com/mx4/web?rnd="+e+"&data=",i=encodeURIComponent(JSON.stringify(t)),o=new Image;console.log(n),o.src=n+i}function n(n){if(n&&n.m){var a={pt:"mx5Qa",m:n.m,n:n.n,o:n.o,p:n.p,data:{}};n.u?(a.dt="content",a.data.url=n.u,a.data.title=n.t||n.n):a.dt="ui",a.l=navigator.language||navigator.userLanguage,a.sv=navigator.platform||"",a.pm=navigator.platform||"",a.d=i,a.uid=e.uid,a.cv=e.max_version,o=localStorage.getItem("SSID"),o||(o=guid(),localStorage.setItem("SSID",o)),a.ssid=o,$.extend(a.data,n.data),t(a)}}var i,o;return{webSend:n}}()});