"use strict";$(function(){function n(n){$.getJSON(p+"/server/hot.php",i).done(function(){console.log(arguments)}).fail(function(){console.log(arguments)}),"function"==typeof n&&n()}function i(n){n=n||{},n.lastmodify!=localStorage.getItem("has-update-plugin-"+g)&&(f=n.lastmodify,$(".switch-action").addClass("has-update")),l(n.data.slice(0,2)),e(n.data.slice(2,6)),o()}function l(n){$("#plugin-new").html(n.map(t))}function t(n){return'<div class="plugin-new-item" file_def="'+n.file_def+'" file_url="'+n.download_url+'" file_id="'+n.file_id+'"><a href="'+n.url+'" target="_blank"><div class="plugin-new-tag"></div><img src="'+n.icon_img+'" alt="" class="plugin-new-img"><div class="plugin-new-info"><div class="plugin-new-title">'+n.title+'</div><div class="plugin-new-desc">'+n.desc+'</div></div></a><a href="'+n.download_url+'" class="plugin-new-add">'+Language.getLang("hotPluginAdd")+"</a></div>"}function e(n){var i=n.map(a);i.push(u()),$("#plugin-list").html(i)}function a(n){return'<div class="plugin-list-item" file_def="'+n.file_def+'" file_url="'+n.download_url+'" file_id="'+n.file_id+'"><a href="'+n.url+'" target="_blank"><img src="'+n.icon_img+'" alt=""><div class="plugin-list-title">'+n.title+'</div><a href="'+n.download_url+'" class="plugin-list-btn">'+Language.getLang("hotPluginAdd")+"</a></a></div>"}function u(){return'<a href="'+p+'" class="plugin-list-add"><i></i><div class="plugin-list-title">'+Language.getLang("hotPluginMore")+"</div></div>"}function o(){$(".plugin-list-btn, .plugin-new-add").on("click",function(n){window.external&&external.mxCall&&(n.preventDefault(),s($(this).parent(),"app"))})}function s(n,i){if("skin"===i)var l=external.mxCall("GetSkinFxVersion");else if("app"===i){var l=external.mxCall("GetAppFxVersion");"1.0.0"===l&&(l="1.0.1")}var t=n.attr("file_def"),e=n.attr("file_url"),a=n.attr("file_id");r(l,t,e,i,a)}function r(n,i,l,t){var e=d(n,i);-1!==e?(l=l.replace(/^https/,"http"),"skin"===t?external.mxCall("InstallSkin",l):"app"===t&&external.mxCall("InstallApp",l)):window.open(l)}function d(n,i){for(var l,t,n=c(n),i=c(i),e=0;;){if(l=n[e],t=i[e],null==l&&null==t)return 0;if(null==l)return-1;if(null==t)return 1;if(l!=t){var a=l>t?1:-1;return a}e++}}function c(n){for(var i=n.split("."),l=0;l<i.length;l++)i[l]=parseInt(i[l],10);return i}var f,g=navigator.language.toLowerCase(),p="zh-cn"==g?"//extension.maxthon.cn":"//extension.maxthon.com";$(document).on("click",".switch-action",function(){var n=$("#hot-plugin-dialog");f&&localStorage.setItem("has-update-plugin-"+g,f),$(this).removeClass("has-update"),n.show(),n.find(".close").one("click",function(){n.hide()})}),n()});