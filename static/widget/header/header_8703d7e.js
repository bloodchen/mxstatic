define("widget/header/header",function(){"use strict";function a(a,n){o.useApi("common.UIStatus",{type:a.type||0,action:a.action||0,status:a.status||0},function(a){n&&n(a)})}function n(a,n){if(a=parseFloat(a),n=parseFloat(n),isNaN(a)||isNaN(n)||0>=n)return"1%";var t=Math.round(a/n*1e4)/100;return 0>=t?"1%":t+"%"}function t(a){a.nickname==""+a.id&&(a.nickname=a.email);var t=navigator.language.toLocaleLowerCase();a.suffix="?uid="+a.id+"ln="+t+"&mxver="+o.max_version+"&mxpn="+o.pn,a.progress=n(a.usedSpace,a.totalSpace),e(a)}function e(a){var n='<ul class="header-action fr">\n				'+s(a)+'\n				<li class="fl">\n					<span class="line">|</span>\n				</li>\n				'+i(a)+"\n			</ul>";l.find(".header-action").replaceWith(n),"Mac"===o.platform&&l.find(".switch-action").hide()}function s(a){var n='\n		<li class="fl">\n			<a class="switch-action" href="#">'+Language.getLang("HotAddons")+'<i></i></a>		</li>\n		<li class="fl">\n			<span class="line">|</span>\n		</li>\n		<li class="fl">\n			<a href="mx://note/index.htm?id='+a.id+'" target="_blank" data-m="builtInpage" data-n="maxNote">'+Language.getLang("Maxnote")+'</a>\n		</li>\n		<li class="fl">\n			<a href="mx://password" target="_blank" data-m="builtInpage" data-n="passKeeper">'+Language.getLang("Passkeeper")+"</a>\n		</li>";return-1!==a.id&&(n+='<li class="fl">\n					<a href="https://pc-uc.uu.me/mail/'+a.suffix+'" target="_blank" data-m="builtInpage" data-n="UUMail">'+Language.getLang("UUMail")+"</a>\n				</li>"),n}function i(a){return-1===a.id?'<li class="fl profile">\n			<span class="login">'+Language.getLang("Login")+'</span>\n			<div class="profile-dropdown">\n				<img src="//pc-newtab.maxthonimg.com/static/img/guest.png" alt="photo"/>\n			</div>\n		</li>':'<li class="fl profile">\n			<span class="login-user">'+a.nickname+'</span>\n			<div class="profile-dropdown">\n				<img src="'+a.avatarUrl.replace(/^(https?:\/\/.+\.maxthon)/,"https://avatar.maxthon")+'" alt="头像" onerror="//pc-newtab.maxthonimg.com/static/img/icon/default.png"/>\n				<div class="profile-continer">\n					<div class="profile-detail">\n						<h4>\n							<span class="user">'+a.nickname+"</span>\n							"+(a.vipLevel>0?'<span class="grade">VIP'+a.vipLevel+"</span>":"")+'\n						</h4>\n						<p class="use-space-info">'+Language.getLang("CloudUseInfo").replace("$used$",(a.usedSpace/1048576).toFixed(2)).replace("$total$",a.totalSpace/1073741824)+'</p>\n						<p class="progress">\n							<span class="extend" style="width: '+a.progress+';"></span>\n						</p>\n						<p class="async-date">\n							'+Language.getLang("LastSyncDate")+"：<span>"+a.syncTime+'</span>\n						</p>\n					</div>\n					<ul>\n						<li>\n							<a href="https://pc-uc.uu.me/i/'+a.suffix+'" target="_blank" data-m="hoverPhoto" data-n="userInformation">'+Language.getLang("AccountInfo")+'</a>\n						</li>\n						<li>\n							<a href="https://pc-uc.uu.me/i/security.html'+a.suffix+'" target="_blank" data-m="hoverPhoto" data-n="userSafe">'+Language.getLang("AccountSecur")+'</a>\n						</li>\n						<li>\n							<p class="logout">'+Language.getLang("Logout")+"</p>\n						</li>\n					</ul>\n				</div>\n			</div>\n		</li>"}var o=window.Api.Maxthon,l=$(".header"),c=function(){o.useApi("account.getCurrentAccount",{},function(a){t(a)})};c();var r={favbar:1,sidebar:1};a({type:1,action:0},function(n){1===n&&a({type:0,action:0},function(a){1===a?$(".gl").addClass("gt").show():$(".gl").addClass("lt").show(),r.sidebar=a}),r.favbar=n}),l.on("click",".logout, .login",function(a){a.preventDefault(),o.useApi("account.logout",{},function(){}),datacode.statistic({m:"hoverPhoto",n:"logout"})}),l.on("click","ul > li > a",function(a){a.preventDefault();var n=this.getAttribute("href"),t=window.Api.Maxthon.max_version,e=this.getAttribute("data-n");switch(e){case"maxNote":o.useApi("common.reportLVTAction",{action:"p-mx5Newtab_clickMolebox"});break;case"passKeeper":("5.1.42"===t||"5.1.106"===t)&&(n="maxthon://password"),o.useApi("common.reportLVTAction",{action:"p-mx5Newtab_clickPasskeeper"});break;case"UUMail":o.useApi("common.reportLVTAction",{action:"p-mx5Newtab_clickUUmail"})}o.useApi("newTabUpground",{url:n})}),l.on("click",".gl",function(){var n=$(this);n.hasClass("lt")?a({action:1,status:1},function(){n.removeClass("lt").addClass("gt")}):a({action:1,status:0},function(){n.removeClass("gt").addClass("lt")})}),o.useApi("account.profileChanged",{},function(){c()}),o.useApi("common.registerUIStatusChanged",{},function(a){$(".gl").removeClass("gt").removeClass("lt").hide(),1===a.type?(1===a.status&&(1===r.sidebar?$(".gl").addClass("gt").show():$(".gl").addClass("lt").show()),r.favbar=a.status):(1===r.favbar&&(1===a.status?$(".gl").addClass("gt").show():$(".gl").addClass("lt").show()),r.sidebar=a.status)})});